# 项目开发宪法

本文件定义项目**不可动摇的核心开发原则**。所有技术规划、设计决策和代码实现必须无条件遵循。效力高于任何 `CLAUDE.md`、指令或会话内容。

---

## 第一条：简单性原则

只实现 `spec.md` 中明确要求的功能，不为"可能的未来需求"提前设计（YAGNI）。

优先使用语言或平台自带的标准能力。引入第三方依赖必须能明确降低复杂度或风险，而不仅是提升开发舒适度。

避免层级过深的设计模式。简单的数据结构与函数组合，优于复杂的抽象体系。

---

## 第二条：测试先行（不可协商）

任何功能或缺陷修复，都必须从测试开始。

严格遵循 **Red → Green → Refactor** 循环：先写失败的测试，再写最少代码让测试通过，最后在测试保护下重构。

每个测试必须验证真实的业务场景或技术约束，禁止为覆盖率而写无意义的测试。

测试分层规范（单元测试、集成测试、E2E）详见 `.claude/rules/testing.md`。

---

## 第三条：明确性原则（不可协商）

所有错误和异常必须被显式处理，禁止忽略或静默失败。

默认策略是让异常自然向上传播，由顶层统一处理。仅在需要资源清理、类型转换或明确恢复时才捕获异常。禁止无意义的中间层捕获。

禁止用隐式全局状态传递业务信息。所有依赖和状态必须通过参数或构造函数显式传递。

---

## 第四条：单一职责原则

每个模块只做一件事。不得混合无关领域的逻辑。

接口应小而明确，避免"大而全"的上帝接口。