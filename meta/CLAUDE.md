# 项目开发方法论

## Specification Driven Development (SDD)

项目采用Specification Driven Development的方式开发，当一个新的需求提出时，需要先在./specs目录下创建这个需求的规格说明。

### SDD 工作流程

1. **需求规格化阶段**：在 `./specs/{编号}-{需求名称}/` 目录下创建：
   - `spec.md` - 需求规格概要说明书（包含系统架构、业务流程、数据模型等，不包含接口，表结构等实现细节，尽量简单）
   - `plan.md` - 技术实现方案（包含技术栈选择、API设计、数据库设计等）
   - `tasks.md` - 详细的任务分解清单（TDD方式，测试先行）

2. **开发实施阶段**：
   - 严格按照 `tasks.md` 中的任务顺序执行
   - 每个任务必须先编写测试，再实现代码（TDD铁律）
   - 遵循自上而下的开发顺序：接口层(router) → 业务层(service) → 数据层(model/database)
   - 使用STUB占位策略快速验证上层逻辑

3. **质量保证阶段**：
   - 单元测试覆盖率 >= 80%
   - 端到端测试覆盖核心业务流程
   - 代码审查和性能测试

### 开发原则（参考 constitution.md）

1. **简单性原则**：仅实现spec要求的功能，避免过度设计
2. **测试先行铁律**：必须先写失败的测试，再实现代码
3. **明确性原则**：错误处理显式化，接口职责单一
4. **用例驱动**：从业务用例和主流程出发分析工作任务

### 任务执行规范

- 任务粒度：每个任务只涉及一个主要文件的修改或创建一个新文件
- 依赖管理：使用 `depends: [任务编号]` 标注任务依赖
- 并行开发：标记 `[P]` 的任务可以并行执行
- STUB策略：上层依赖底层时，底层未实现可先用STUB占位，后续任务中实现

### 示例：规格目录结构

```
specs/
  001-dms-init/
    spec.md      # 设备管理系统规格说明书
    plan.md      # 技术实现方案
    tasks.md     # 任务分解清单
  002-feature-x/
    spec.md
    plan.md
    tasks.md
```

### 开发时的注意事项

- 开发新功能前，必须先查看 `./specs/` 目录下的相关规格文档
- 所有代码实现必须符合 spec.md 中的定义
- 技术选型和架构设计必须遵循 plan.md 中的方案
- 任务执行必须按照 tasks.md 中的顺序和依赖关系进行
- 测试代码必须先于业务代码编写

---

# 导入通用的 AI Agent 协作标准
@../AGENTS.md

# 项目文档请参考

@../README.md

