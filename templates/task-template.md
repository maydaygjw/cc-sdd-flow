# [功能名称] - 开发任务分解

## 任务说明

本文件根据 `plan.md` 中的技术方案分解为可执行任务。遵循以下原则：

1. **自下而上**：按 `基础设施 → 核心模块 → 集成层 → 部署 → E2E` 顺序排列
2. **TDD 强制**：每个模块先写测试，再写实现（红 → 绿 → 重构）
3. **任务粒度**：每个任务只涉及一个文件的修改或新建
4. **顺序执行**：从上到下执行，完成后将 `[ ]` 标记为 `[x]`
5. **测试分层**：单元测试只测纯函数（禁止 Mock），集成测试可 Mock 外部依赖（每类最多 3 个方法），E2E 禁止 Mock

---

## 基础设施（先决条件）

> 所有模块依赖的前置工作：依赖清理、异常定义、配置文件等。

**1. [ ] [任务描述]**
- 修改/创建 `[文件路径]`
- [具体操作]
- [具体操作]

**2. [ ] [任务描述]**
- 修改/创建 `[文件路径]`
- [具体操作]

---

## 模块一：[模块名称]

> 对应 plan.md 第 [X] 节。

### 单元测试（纯函数）

**3. [ ] [模块名] 单元测试 - [测试目标]**
- 创建 `tests/unit/test_[module].py`
- 测试 `[函数签名]` 纯函数
- 测试 `[函数签名]` 纯函数
- 测试边界条件：[具体场景]
- **注意**：仅测试纯函数逻辑，不涉及任何 I/O

### 集成测试（I/O 操作）

**4. [ ] [模块名] 集成测试 - [测试目标]**
- 创建 `tests/integration/test_[module].py`
- 测试 `[方法名]` [测试内容]
- 测试 `[方法名]` [测试内容]
- **约束**：此类最多 3 个测试方法，用 `@pytest.mark.parametrize` 扩展场景

### 实现

**5. [ ] [新增/重写/修改] [文件名] - [功能描述]**
- [新增/完全重写/修改] `src/[module].py`
- 实现 `[类名]` 类：
  - `[方法签名]` — [用途]
  - `[方法签名]` — [用途]
- 错误处理：抛出 `[异常类型]`

---

## 模块二：[模块名称]

> 对应 plan.md 第 [X] 节。

### 单元测试（纯函数）

**6. [ ] [模块名] 单元测试 - [测试目标]**
- 创建 `tests/unit/test_[module].py`
- 测试 `[函数签名]` 纯函数
- 测试边界条件：[具体场景]
- **注意**：仅测试纯函数逻辑，不涉及任何 I/O

### 集成测试（I/O 操作）

**7. [ ] [模块名] 集成测试 - [测试目标]**
- 创建 `tests/integration/test_[module].py`
- 测试 `[方法名]` [测试内容]
- 测试 `[方法名]` [测试内容]
- **约束**：此类最多 3 个测试方法

### 实现

**8. [ ] [新增/重写/修改] [文件名] - [功能描述]**
- [新增/完全重写/修改] `src/[module].py`
- 实现 `[类名]` 类：
  - `[方法签名]` — [用途]
  - `[方法签名]` — [用途]
- 错误处理：抛出 `[异常类型]`

---

## 集成层：[集成内容描述]

> 将各模块连接起来的入口层（CLI、主流程编排等）。

### 集成测试

**9. [ ] [集成层] 集成测试**
- 创建 `tests/integration/test_[entry].py`
- 测试主流程编排：[流程描述]
- 使用参数化覆盖：[场景1] / [场景2] / [场景3]
- **约束**：此类最多 3 个测试方法，用 STUB 隔离外部依赖

### 实现

**10. [ ] 修改 [入口文件] - [修改目标]**
- 修改 `src/[entry].py`
- [具体修改内容]
- [具体修改内容]

---

## 容器化部署

> 仅在 spec 要求容器化时包含此节，否则删除。

**11. [ ] 创建 Dockerfile**
- 创建 `Dockerfile`
- 基础镜像：[镜像名]
- 安装系统依赖：[依赖列表]
- [其他构建步骤]

**12. [ ] 创建 [entrypoint/启动脚本]**
- 创建 `[脚本文件名]`
- [启动步骤1]
- [启动步骤2]
- [清理/兜底逻辑]

**13. [ ] 创建 docker-compose.yml**
- 创建 `docker-compose.yml`
- 配置卷挂载：[挂载说明]
- 配置环境变量：[变量说明]

---

## E2E 测试

**14. [ ] E2E 测试 - 完整流程验证**
- 创建 `tests/e2e/test_[flow].py`
- 测试完整业务流程：[流程描述]
- 验证输出：[验收条件]
- **约束**：禁止 Mock，使用真实环境

---

## 任务统计

- 总任务数：**N** 个
- 单元测试：X 个
- 集成测试：X 个
- 实现任务：X 个
- 配置任务：X 个
- E2E 测试：X 个

---

## 执行建议

1. **按模块顺序**：[模块1] → [模块2] → [集成层] → [容器化] → E2E
2. **TDD 严格执行**：每个模块先跑测试确认红，再写实现确认绿
3. **本地验证**：每个模块完成后立即运行对应测试，不要积累
4. **[项目特定建议]**：[根据实际项目补充]